<!DOCTYPE html>
<html lang="en">
  <head>
    <title>HTML5 Events</title>
  </head>
  <body>
    <span id="events"></span>

    <script type="text/javascript">
      function getObjectType(object) {
        var funcNameRegex = /function (.{1,})\(/;
        var results = (funcNameRegex).exec((object).constructor.toString());
        return (results && results.length > 1) ? results[1] : "object";
      }

      function getObjectAttributes(object) {
        var proto = Object.getPrototypeOf(object);
        if (proto) {
          return Object.keys(proto);
        }
        else {
          return Object.keys(object);
        }
      }

      function stringifyFullObject(object, prependType) {
        if (object == null) {
          return null;
        }
        if (typeof object != 'object') {
          return JSON.stringify(object);
        }
        var eventAttributes = getObjectAttributes(event);
        var eventObjectType = getObjectType(event);
        var result = (prependType ? (eventObjectType + " ") : "") + "{ ";
        for (var i = 0; i < eventAttributes.length; i++) {
          if (i > 0) {
            result += ",";
          }
          result += " \"" + eventAttributes[i] + "\": " + stringifyFullObject(object[eventAttributes[i]], false);
        }
        result += " }";
        return result;
      }

      function logEvent(eventType, event) {
        var eventStringified = stringifyFullObject(event, true);

        var element = document.getElementById("events");
        element.innerHTML = element.innerHTML + "<br />" + eventStringified;
      }
      window.addEventListener("click", (e) => logEvent("click", e));
    </script>
  </body>
</html>
